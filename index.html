<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø³ØªÛ†Ø¯ÛŒÛ†ÛŒ Ù¾Ø§Ù„ÛŽØªÛŒ Ú•Û•Ù†Ú¯ÛŒ Ù…Û†Ø¯ÛŽØ±Ù†</title>
    <style>
        /* Ø§Ù„ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ø£ØµÙ„ÙŠØ© */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #0a0a0a; color: #ffffff; min-height: 100vh; overflow-x: hidden;
        }
        .header { padding: 40px 20px; text-align: center; background: linear-gradient(180deg, #1a1a1a 0%, #0a0a0a 100%); border-bottom: 1px solid #2a2a2a; }
        h1 { font-size: clamp(2rem, 5vw, 3.5rem); font-weight: 700; background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 10px; }
        .subtitle { color: #888; font-size: 1rem; font-weight: 300; }
        .controls { max-width: 1400px; margin: 30px auto; padding: 0 20px; display: flex; gap: 15px; flex-wrap: wrap; justify-content: center; align-items: center; }
        .btn { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 14px 32px; border-radius: 12px; cursor: pointer; font-size: 15px; font-weight: 600; transition: 0.3s; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3); }
        .btn-camera { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
        
        /* Ù‚Ø³Ù… Ø¯Ù…Ø¬ Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø¬Ø¯ÙŠØ¯ */
        .mixer-section {
            background: #151515; max-width: 600px; margin: 20px auto; padding: 20px; border-radius: 20px; border: 1px dashed #444; text-align: center;
        }
        .mixer-inputs { display: flex; gap: 20px; justify-content: center; align-items: center; margin: 15px 0; }
        .color-input { width: 60px; height: 60px; border-radius: 50%; border: 2px solid #fff; cursor: pointer; background: none; }
        .mix-result { width: 100px; height: 100px; border-radius: 15px; margin: 10px auto; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 12px; text-shadow: 0 0 5px #000; border: 1px solid #333; }

        #cameraOverlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 2000; justify-content: center; align-items: center; flex-direction: column; }
        #video { width: 90%; max-width: 500px; border-radius: 20px; border: 2px solid #764ba2; }
        select { background: #1a1a1a; color: white; border: 1px solid #333; padding: 14px 20px; border-radius: 12px; cursor: pointer; }
        .container { max-width: 1400px; margin: 0 auto; padding: 20px; }
        .palettes-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 25px; margin-top: 20px; }
        .palette-card { background: #1a1a1a; border-radius: 20px; overflow: hidden; border: 1px solid #2a2a2a; position: relative; }
        .palette-header { padding: 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #2a2a2a; }
        .colors-container { display: flex; height: 200px; }
        .color-swatch { flex: 1; position: relative; cursor: pointer; transition: 0.3s; }
        .color-label { position: absolute; bottom: 0; left: 0; right: 0; padding: 15px 10px; background: rgba(0,0,0,0.7); color: white; font-size: 12px; text-align: center; opacity: 0; }
        .color-swatch:hover .color-label { opacity: 1; }
        .notification { position: fixed; top: 30px; right: 30px; background: #764ba2; color: white; padding: 16px 24px; border-radius: 12px; opacity: 0; transition: 0.4s; z-index: 3000; }
        .notification.show { opacity: 1; }
    </style>
</head>
<body>
    <div class="header">
        <h1>Ø³ØªÛ†Ø¯ÛŒÛ†ÛŒ Ù¾Ø§Ù„ÛŽØªÛŒ Ú•Û•Ù†Ú¯ÛŒ Ù…Û†Ø¯ÛŽØ±Ù†</h1>
        <p class="subtitle">Ú•Û•Ù†Ú¯Û•Ú©Ø§Ù† Ù„ÛŽØ±Û• Ø¯Ø±ÙˆØ³Øª Ø¯Û•Ú©Ø±ÛŽÙ† Ùˆ ØªÛŽÚ©Û•Úµ Ø¯Û•Ú©Ø±ÛŽÙ†</p>
    </div>

    <div class="controls">
        <button class="btn" onclick="generatePalettes()">âœ¨ Ø¯Ø±ÙˆØ³ØªÚ©Ø±Ø¯Ù†ÛŒ Ù¾Ø§Ù„ÛŽØªÛŒ Ù†ÙˆÛŽ</button>
        <button class="btn btn-camera" onclick="openCamera()">ðŸ“¸ Ú©Ø±Ø¯Ù†Û•ÙˆÛ•ÛŒ Ú©Ø§Ù…ÛŽØ±Ø§</button>
        <select id="schemeType" onchange="generatePalettes()">
            <option value="modern">Ù…Û†Ø¯ÛŽØ±Ù†</option>
            <option value="monochromatic">ØªØ§Ú© Ú•Û•Ù†Ú¯</option>
            <option value="vibrant">Ø²ÛŒÙ†Ø¯ÙˆÙˆ</option>
        </select>
    </div>

    <div class="mixer-section">
        <h3>ðŸŽ¨ ØªÛŽÚ©Û•ÚµÚ©Ø±Ø¯Ù†ÛŒ Ú•Û•Ù†Ú¯Û•Ú©Ø§Ù† (ØªØ§ÛŒØ¨Û•Øª)</h3>
        <div class="mixer-inputs">
            <input type="color" id="color1" class="color-input" value="#ff0000" oninput="mixColors()">
            <span style="font-size: 24px;">+</span>
            <input type="color" id="color2" class="color-input" value="#ffffff" oninput="mixColors()">
        </div>
        <p>Ø¦Û•Ù†Ø¬Ø§Ù…ÛŒ ØªÛŽÚ©Û•ÚµÚ©Ø±Ø¯Ù†:</p>
        <div id="mixResult" class="mix-result" onclick="copyToClipboard(this.innerText)">#FF7F7F</div>
    </div>

    <div id="cameraOverlay">
        <video id="video" autoplay playsinline></video>
        <div class="controls">
            <button class="btn" onclick="captureAndAnalyze()">ðŸ“¸ Ø´ÛŒÚ©Ø§Ø±ÛŒ ÙˆÛŽÙ†Û•</button>
            <button class="btn" style="background:#444" onclick="closeCamera()">Ø¯Ø§Ø®Ø³ØªÙ†</button>
        </div>
        <canvas id="canvas" style="display:none;"></canvas>
    </div>

    <div class="container">
        <div class="palettes-grid" id="palettes"></div>
    </div>

    <div class="notification" id="notification"></div>

    <script>
        const paletteThemes = ['Ø³Ø§ÛŒØ¨Û•Ø±Ù¾Ø§Ù†Ú©', 'Ù†ÛŒÙˆÛ•Ø´Û•Ùˆ Ø´ÛŒÙ†', 'Ø®Û•ÙˆÙ†ÛŒ Ù†ÛŒÛ†Ù†', 'Ù…ÙŠÙ†ÙŠÙ…Ø§Ù„ÙŠØ³ØªÛŒ', 'Ø¦Û†Ù‚ÛŒØ§Ù†ÙˆØ³', 'Ø®Û†Ø±Ø¦Ø§ÙˆØ§Ø¨ÙˆÙˆÙ†'];
        const video = document.getElementById('video');
        const canvas = document.getElementById('canvas');
        const overlay = document.getElementById('cameraOverlay');

        // Ù…ÙŠØ²Ø© Ø¯Ù…Ø¬ Ø§Ù„Ø£Ù„ÙˆØ§Ù† - Ø§Ù„Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ©
        function mixColors() {
            const c1 = document.getElementById('color1').value;
            const c2 = document.getElementById('color2').value;
            
            const r1 = parseInt(c1.substr(1,2), 16), g1 = parseInt(c1.substr(3,2), 16), b1 = parseInt(c1.substr(5,2), 16);
            const r2 = parseInt(c2.substr(1,2), 16), g2 = parseInt(c2.substr(3,2), 16), b2 = parseInt(c2.substr(5,2), 16);
            
            const r = Math.round((r1 + r2) / 2).toString(16).padStart(2, '0');
            const g = Math.round((g1 + g2) / 2).toString(16).padStart(2, '0');
            const b = Math.round((b1 + b2) / 2).toString(16).padStart(2, '0');
            
            const resultHex = `#${r}${g}${b}`.toUpperCase();
            const resDiv = document.getElementById('mixResult');
            resDiv.style.backgroundColor = resultHex;
            resDiv.innerText = resultHex;
        }

        async function openCamera() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ 
                    video: { facingMode: "environment" } 
                });
                video.srcObject = stream;
                overlay.style.display = 'flex';
            } catch (err) { alert("Error: " + err); }
        }

        function closeCamera() {
            if (video.srcObject) video.srcObject.getTracks().forEach(t => t.stop());
            overlay.style.display = 'none';
        }

        function captureAndAnalyze() {
            const ctx = canvas.getContext('2d', { willReadFrequently: true });
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            
            // Ø¥ØµÙ„Ø§Ø­ Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ø¨ÙŠØ¶ ÙˆØ§Ù„Ø£Ø³ÙˆØ¯ Ø¨Ø§Ù†ØªØ¸Ø§Ø± 100ms Ù„Ø§Ø³ØªÙ‚Ø±Ø§Ø± Ø§Ù„Ø­Ø³Ø§Ø³
            ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
            
            setTimeout(() => {
                const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height).data;
                const colorsMap = {};
                const uniqueColors = new Set();

                for (let i = 0; i < imageData.length; i += 40) {
                    const r = imageData[i], g = imageData[i+1], b = imageData[i+2];
                    const hex = "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1).toUpperCase();
                    uniqueColors.add(hex);
                    colorsMap[hex] = (colorsMap[hex] || 0) + 1;
                }

                const sortedColors = Object.entries(colorsMap).sort((a,b) => b[1]-a[1]).slice(0, 5).map(e => e[0]);
                addCustomPalette("Ú•Û•Ù†Ú¯Û•Ú©Ø§Ù†ÛŒ ÙˆÛŽÙ†Û•Ú©Û•", sortedColors);
                showNotification(`Ø³Û•Ø±Ú©Û•ÙˆØªÙˆÙˆ Ø¨ÙˆÙˆ! ${uniqueColors.size.toLocaleString()} Ú•Û•Ù†Ú¯ Ø¯Û†Ø²Ø±Ø§ÛŒÛ•ÙˆÛ•`);
                closeCamera();
            }, 100);
        }

        function addCustomPalette(name, colors) {
            const container = document.getElementById('palettes');
            container.prepend(createPaletteCard(name, colors));
        }

        function hslToHex(h, s, l) {
            l /= 100;
            const a = s * Math.min(l, 1 - l) / 100;
            const f = n => {
                const k = (n + h / 30) % 12;
                const color = l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);
                return Math.round(255 * color).toString(16).padStart(2, '0');
            };
            return `#${f(0)}${f(8)}${f(4)}`;
        }

        function createPaletteCard(theme, colors) {
            const card = document.createElement('div');
            card.className = 'palette-card';
            card.innerHTML = `
                <div class="palette-header">
                    <span class="palette-name">${theme}</span>
                    <button onclick='copyAllColors(${JSON.stringify(colors)})' style="background:#2a2a2a; border:none; color:#888; padding:8px; border-radius:8px; cursor:pointer">Ú©Û†Ù¾ÛŒ Ù‡Û•Ù…ÙˆÙˆ</button>
                </div>
                <div class="colors-container">
                    ${colors.map(color => `
                        <div class="color-swatch" style="background-color: ${color}" onclick="copyToClipboard('${color}')">
                            <div class="color-label">${color}</div>
                        </div>
                    `).join('')}
                </div>
            `;
            return card;
        }

        function generatePalettes() {
            const container = document.getElementById('palettes');
            container.innerHTML = '';
            for (let i = 0; i < 8; i++) {
                const h = Math.floor(Math.random() * 360);
                const colors = Array(5).fill(0).map((_, j) => hslToHex(h, 70, 20 + (j * 15)));
                const theme = paletteThemes[Math.floor(Math.random() * paletteThemes.length)];
                container.appendChild(createPaletteCard(theme, colors));
            }
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => showNotification(`Ú©Û†Ù¾ÛŒ Ú©Ø±Ø§: ${text}`));
        }

        function copyAllColors(colors) {
            navigator.clipboard.writeText(colors.join(', ')).then(() => showNotification('Ù‡Û•Ù…ÙˆÙˆ Ú•Û•Ù†Ú¯Û•Ú©Ø§Ù† Ú©Û†Ù¾ÛŒ Ú©Ø±Ø§Ù†!'));
        }

        function showNotification(message) {
            const n = document.getElementById('notification');
            n.textContent = message;
            n.classList.add('show');
            setTimeout(() => n.classList.remove('show'), 3000);
        }

        generatePalettes();
    </script>
</body>
</html>
